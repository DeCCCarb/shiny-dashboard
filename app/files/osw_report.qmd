---
title: "OSW Labor Impact Report"
output: pdf_document
params:
  start_year: 2025
  end_year: 2030
  job_type: "Construction Jobs"
---

## OSW Labor Impact for `r params$job_type`

This report shows the projected labor impact of Floating Offshore Wind (OSW) development in the Central Coast of California.

```{r}
# Code to generate the plot
osw_om <- calculate_osw_om_jobs(
    county = "Tri-county",
    start_year = params$start_year,
    end_year = params$end_year,
    ambition = "High",
    initial_capacity = 1000,
    target_capacity = 5000,
    direct_jobs = 127,
    indirect_jobs = 126,
    induced_jobs = 131
)

osw_construction <- calculate_osw_construction_jobs(
    county = "Tri-County",
    start_year = params$start_year,
    end_year = params$end_year,
    ambition = "High", 
    initial_capacity = 1000,
    target_capacity = 5000,
    direct_jobs = 82,
    indirect_jobs = 2571,
    induced_jobs = 781
)

osw_all <- rbind(osw_construction, osw_om) %>%
    filter(type == params$job_type)

osw_plot <- ggplot(osw_all, aes(x = year, y = n_jobs, group = occupation)) +
    geom_col(aes(fill = occupation)) +
    scale_fill_manual(labels = c("Construction Jobs", "Operations & Maintenance Jobs"),
                      values = c("#4a4e69", "#9a8c98")) +
    scale_y_continuous(limits = c(0, 2000)) +
    labs(title = glue::glue("Projected {params$job_type} jobs in CA Central Coast from Floating OSW development"),
         y = "FTE Jobs") +
    theme_minimal()

# Render the plot
plotly::ggplotly(osw_plot)
```